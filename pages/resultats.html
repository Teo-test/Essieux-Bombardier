<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Résultats</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col" id="page-resultats">

  <!-- Navigation Bar -->
  <nav class="bg-gray-800 text-white p-4">
    <div class="container mx-auto flex justify-around">
      <a href="../index.html" class="hover:underline">Accueil</a>
      <a href="mesures.html" class="hover:underline">Mesures</a>
      <a href="resultats.html" class="hover:underline">Résultats</a>
      <a href="pdf.html" class="underline">PDF</a>
    </div>
  </nav>
  <header class="bg-blue-600 text-white p-4">
    <h1 class="text-2xl font-bold">Résultats des Mesures</h1>
  </header>
  <main class="flex-grow container mx-auto p-4">
    <div class="bg-white p-6 rounded-lg shadow space-y-6">
      <!-- Section pour afficher les informations générales -->
      <section>
        <h2 class="text-xl font-semibold mb-4">Informations Générales</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div>
            <p class="text-sm font-medium">Date: <span id="display-date" class="font-normal"></span></p>
          </div>
          <div>
            <p class="text-sm font-medium">OM: <span id="display-om" class="font-normal"></span></p>
          </div>
          <div>
            <p class="text-sm font-medium">Bogie N°: <span id="display-bogieNo" class="font-normal"></span></p>
          </div>
          <div>
            <p class="text-sm font-medium">Type N°: <span id="display-typeNo" class="font-normal"></span></p>
          </div>
          <div>
            <p class="text-sm font-medium">Fabrick: <span id="display-Fabrick" class="font-normal"></span></p>
          </div>
          <div>
            <p class="text-sm font-medium">Auftrags: <span id="display-Auftrags" class="font-normal"></span></p>
          </div>
          <div>
            <p class="text-sm font-medium">Baujahr: <span id="display-Baujahr" class="font-normal"></span></p>
          </div>
        </div>
      </section>

      <!-- Section pour afficher les résultats des mesures -->
      <section>
        <h2 class="text-xl font-semibold mb-4">Résultats des Mesures</h2>
        <div id="results-container" class="space-y-4"></div>
      </section>
    </div>
  </main>

  <script>
    // Même configuration que dans mesures.html
    const measurementGroups = [
      { title: "Jeu axial 'Jm' mesuré Avant Démontage", fields: ["axial-play-A", "axial-play-B"], label: "Côté" },
      { title: "Contrôle visuel des soudures", fields: ["soud-vis-A", "soud-vis-B"], label: "Côté", type: "text" },
      { title: "<b>Côté A</b>", fields: [], label: "" },
      { title: "<i>Grand Diamètre</i>", fields: ["GD-Côte Verticale 1", "GD-Côte Verticale 2", "GD-Côte Verticale 3"], label: "" },
      { title: "", fields: ["GD-Côte Horizontale 4", "GD-Côte Horizontale 5", "GD-Côte Horizontale 6"], label: "" },
      { title: "<i>Petit Diamètre<i>", fields: ["PD-Côte Verticale 1", "PD-Côte Verticale 2", "PD-Côte Verticale 3"], label: "" },
      { title: "", fields: ["PD-Côte Horizontale 4", "PD-Côte Horizontale 5", "PD-Côte Horizontale 6"], label: "" },
      { title: "<b>Côté B</b>", fields: [], label: "" },
      { title: "<i>Grand Diamètre</i>", fields: ["GD-Côte Verticale 1", "GD-Côte Verticale 2", "GD-Côte Verticale 3"], label: "" },
      { title: "", fields: ["GD-Côte Horizontale 4", "GD-Côte Horizontale 5", "GD-Côte Horizontale 6"], label: "" },
      { title: "<i>Petit Diamètre<i>", fields: ["PD-Côte Verticale 1", "PD-Côte Verticale 2", "PD-Côte Verticale 3"], label: "" },
      { title: "", fields: ["PD-Côte Horizontale 4", "PD-Côte Horizontale 5", "PD-Côte Horizontale 6"], label: "" },
      { title: "<b>Valeurs 'x' mesurées</b> = longueur torillon", fields: ["measured-value-x-A", "measured-value-x-B"], label: "Côté" },
      { title: "<b>Valeurs 'y' mesurées</b> = hauteur grand roulement", fields: ["measured-value-y-A", "measured-value-y-B"], label: "Côté" },
      { title: "<b>Valeurs 'z' mesurées</b> = hauteur petie roulement", fields: ["measured-value-z-A", "measured-value-z-B"], label: "Côté" },
      { title: "<b>Valeurs 'u' mesurées</b> = hauteur petit et grand roulement montés sur la roue", fields: ["measured-value-u-A", "measured-value-u-B"], label: "Côté" },
      { title: "<b>Valeurs 'wm' mesurées</b> = profondeur du couvercle BM", fields: ["measured-value-wm-A", "measured-value-wm-B"], label: "Côté" },
      { title: "<b>Valeurs 'bm' mesurées</b> = hauteur douille d'écartement", fields: ["measured-value-bm-A", "measured-value-bm-B"], label: "Côté" },
      { title: "<b>Valeurs 'd' mesurées</b> = hauteur épaulement torillon", fields: ["measured-value-d-A", "measured-value-d-B"], label: "Côté" },
      { title: "<b>Valeurs 'e' mesurées</b> = hauteur flasque", fields: ["measured-value-e-A", "measured-value-e-B"], label: "Côté" },
      { title: "<b>Valeurs 'eu' usinées</b>", fields: ["measured-value-eu-A", "measured-value-eu-B"], label: "Côté" },
      { title: "<b>Jeu axial 'jm' mesuré Après remise en état</b>", fields: ["axial-play-after-A", "axial-play-after-B"], label: "Côté" },
      { title: "Ecartement des roues", fields: ["wheel-ecart-A", "wheel-ecart-B"], label: "Côté" },
    ];

    // Récupérer les données du localStorage
    const savedData = JSON.parse(localStorage.getItem('mesuresData'));

    // Afficher les informations générales
    document.getElementById('display-date').textContent = savedData?.date || 'Non spécifié';
    document.getElementById('display-om').textContent = savedData?.om || 'Non spécifié';
    document.getElementById('display-bogieNo').textContent = savedData?.bogieNo || 'Non spécifié';
    document.getElementById('display-typeNo').textContent = savedData?.typeNo || 'Non spécifié';
    document.getElementById('display-Fabrick').textContent = savedData?.Fabrick || 'Non spécifié';
    document.getElementById('display-Auftrags').textContent = savedData?.Auftrags || 'Non spécifié';
    document.getElementById('display-Baujahr').textContent = savedData?.Baujahr || 'Non spécifié';

    // Afficher les résultats des mesures
    const resultsContainer = document.getElementById('results-container');
    if (savedData) {
      measurementGroups.forEach(group => {
        // N'affiche pas les groupes sans champs
        if (!group.fields.length) {
          resultsContainer.innerHTML += `<div class="mt-6 mb-2 text-lg font-bold">${group.title}</div>`;
          return;
        }
        const section = document.createElement('div');
        section.className = 'bg-gray-50 p-4 rounded-lg';
        section.innerHTML = `<h3 class="font-medium mb-2">${group.title}</h3>`;

        const fieldsContainer = document.createElement('div');
        fieldsContainer.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4';

        group.fields.forEach(field => {
          const fieldId = field.split('-').pop();
          const value = savedData[field] || 'Non spécifié';
          fieldsContainer.innerHTML += `
            <div>
              <p class="text-sm font-medium">${fieldId}: <span class="font-normal">${value}</span></p>
            </div>
          `;
        });

        section.appendChild(fieldsContainer);
        resultsContainer.appendChild(section);
      });
    } else {
      resultsContainer.innerHTML = '<p class="text-center text-gray-500">Aucune donnée de mesure disponible.</p>';
    }
  </script>
</body>
</html>
